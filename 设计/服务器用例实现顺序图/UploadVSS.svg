<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="653px" preserveAspectRatio="none" style="width:913px;height:653px;" version="1.1" viewBox="0 0 913 653" width="913px" zoomAndPan="magnify"><defs><filter height="300%" id="f41m53k" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="420.75" y="23.5352">UploadVSS</text><rect fill="#FFFFFF" filter="url(#f41m53k)" height="516.8555" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="400" y="126.9766"/><rect fill="#FFFFFF" filter="url(#f41m53k)" height="516.8555" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="580" y="126.9766"/><rect fill="#FFFFFF" filter="url(#f41m53k)" height="516.8555" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="846" y="126.9766"/><rect fill="#FFFFFF" filter="url(#f41m53k)" height="357.9922" style="stroke: #000000; stroke-width: 2.0;" width="891.5" x="13" y="277.8398"/><rect fill="#FFFFFF" height="73.5762" style="stroke: none; stroke-width: 1.0;" width="891.5" x="13" y="562.2559"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="128" x2="128" y1="116.9766" y2="652.832"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="405" x2="405" y1="116.9766" y2="652.832"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="584.5" x2="584.5" y1="116.9766" y2="652.832"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="850.5" x2="850.5" y1="116.9766" y2="652.832"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="105" y="114.0234">Client</text><ellipse cx="128" cy="43.4883" fill="#FEFECE" filter="url(#f41m53k)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M128,51.4883 L128,78.4883 M115,59.4883 L141,59.4883 M128,78.4883 L115,93.4883 M128,78.4883 L141,93.4883 " fill="#FEFECE" filter="url(#f41m53k)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f41m53k)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="360" y="81.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="367" y="102.0234">WebServer</text><rect fill="#FEFECE" filter="url(#f41m53k)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="183" x="491.5" y="81.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="169" x="498.5" y="102.0234">VSSInformationDatabase</text><rect fill="#FEFECE" filter="url(#f41m53k)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="807.5" y="81.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="814.5" y="102.0234">VSSFolder</text><rect fill="#FFFFFF" filter="url(#f41m53k)" height="516.8555" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="400" y="126.9766"/><rect fill="#FFFFFF" filter="url(#f41m53k)" height="516.8555" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="580" y="126.9766"/><rect fill="#FFFFFF" filter="url(#f41m53k)" height="516.8555" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="846" y="126.9766"/><polygon fill="#A80036" points="388,143.9766,398,147.9766,388,151.9766,392,147.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="128" x2="394" y1="147.9766" y2="147.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="135" y="143.5449">UploadRequest(VSSInformation, UserID)</text><polygon fill="#A80036" points="568,173.2871,578,177.2871,568,181.2871,572,177.2871" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="410" x2="574" y1="177.2871" y2="177.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="417" y="172.8555">VSSInformation, UserID</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="590" x2="632" y1="228.374" y2="228.374"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="632" x2="632" y1="228.374" y2="241.374"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="591" x2="632" y1="241.374" y2="241.374"/><polygon fill="#A80036" points="601,237.374,591,241.374,601,245.374,597,241.374" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="597" y="223.6318">Search(VSSInformation, UserID)</text><polygon fill="#FBFB77" filter="url(#f41m53k)" points="327,190.5977,327,261.5977,571,261.5977,571,200.5977,561,190.5977,327,190.5977" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="561" x2="561" y1="190.5977" y2="200.5977"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="571" x2="561" y1="200.5977" y2="200.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="333" y="208.166">根据VSS的类型（地图或是演唱会），</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="333" y="223.4766">VSS的名称和上传者的ID在VSS_Table</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="333" y="238.7871">中进行查询如果存在返回True，不存在</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="333" y="254.0977">则返回False</text><rect fill="none" height="357.9922" style="stroke: #000000; stroke-width: 2.0;" width="891.5" x="13" y="277.8398"/><polygon fill="#EEEEEE" points="13,277.8398,75,277.8398,75,284.8398,65,294.8398,13,294.8398,13,277.8398" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="28" y="291.4082">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="90" y="290.4746">[NotExist]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="590" x2="632" y1="330.2715" y2="330.2715"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="632" x2="632" y1="330.2715" y2="343.2715"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="591" x2="632" y1="343.2715" y2="343.2715"/><polygon fill="#A80036" points="601,339.2715,591,343.2715,601,347.2715,597,343.2715" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="597" y="325.5293">UpdateVSS(VSSType, VSSName, UserID)</text><polygon fill="#FBFB77" filter="url(#f41m53k)" points="242,300.1504,242,355.1504,571,355.1504,571,310.1504,561,300.1504,242,300.1504" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="561" x2="561" y1="300.1504" y2="310.1504"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="571" x2="561" y1="310.1504" y2="310.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="308" x="248" y="317.7188">将VSSType，VSSName和UserID构成的键值对更新至</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="306" x="248" y="333.0293">VSS_Table并为此VSS建立一个存储路径，返还此路径</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="248" y="348.3398">注：此路径不包含文件名</text><polygon fill="#A80036" points="421,382.082,411,386.082,421,390.082,417,386.082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="415" x2="579" y1="386.082" y2="386.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="427" y="381.6504">Path</text><polygon fill="#A80036" points="421,431.7031,411,435.7031,421,439.7031,417,435.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="415" x2="579" y1="435.7031" y2="435.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="427" y="431.2715">Response</text><polygon fill="#FBFB77" filter="url(#f41m53k)" points="84,399.3926,84,454.3926,391,454.3926,391,409.3926,381,399.3926,84,399.3926" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="381" x2="381" y1="399.3926" y2="409.3926"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="391" x2="381" y1="409.3926" y2="409.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276" x="90" y="416.9609">Response即为上面Search的结果，如果为False</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="90" y="432.2715">则允许VSS传输进入服务器，否则则不允许,客户端</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="90" y="447.582">根据收到Response的时间来进行TimeOut判定</text><polygon fill="#A80036" points="139,481.3242,129,485.3242,139,489.3242,135,485.3242" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="399" y1="485.3242" y2="485.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="145" y="480.8926">Response</text><polygon fill="#A80036" points="388,510.6348,398,514.6348,388,518.6348,392,514.6348" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="128" x2="394" y1="514.6348" y2="514.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="135" y="510.2031">VSS</text><polygon fill="#A80036" points="834,544.9453,844,548.9453,834,552.9453,838,548.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="410" x2="840" y1="548.9453" y2="548.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="417" y="544.5137">AddVSS(VSS, Path)</text><polygon fill="#FBFB77" filter="url(#f41m53k)" points="23,527.9453,23,552.9453,391,552.9453,391,537.9453,381,527.9453,23,527.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="381" x2="381" y1="527.9453" y2="537.9453"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="391" x2="381" y1="537.9453" y2="537.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="347" x="29" y="545.5137">根据所给路径将传输进入服务器的VSS储存到对应的文件夹下</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="904.5" y1="563.2559" y2="563.2559"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="35" x="18" y="573.8906">[Exist]</text><polygon fill="#A80036" points="421,594.2109,411,598.2109,421,602.2109,417,598.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="415" x2="579" y1="598.2109" y2="598.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="427" y="593.7793">Response</text><polygon fill="#A80036" points="139,623.5215,129,627.5215,139,631.5215,135,627.5215" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="399" y1="627.5215" y2="627.5215"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="145" y="623.0898">Response</text></g></svg>